{"schemas":"DEFINE TABLE OVERWRITE author TYPE NORMAL SCHEMAFULL\n    PERMISSIONS \n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD OVERWRITE name ON author TYPE string ASSERT $value != NONE;\nDEFINE FIELD OVERWRITE bio ON author TYPE option<string>;\nDEFINE FIELD OVERWRITE email ON author TYPE string ASSERT string::is::email($value);\nDEFINE FIELD OVERWRITE linkedin ON author TYPE option<string>;\nDEFINE FIELD OVERWRITE twitter ON author TYPE option<string>;\nDEFINE FIELD OVERWRITE github ON author TYPE option<string>;\n\nDEFINE TABLE OVERWRITE post TYPE NORMAL SCHEMAFULL \n    PERMISSIONS \n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD OVERWRITE title ON post TYPE string ASSERT $value != NONE;\nDEFINE FIELD OVERWRITE summary ON post TYPE string ASSERT $value != NONE;\nDEFINE FIELD OVERWRITE body ON post TYPE string ASSERT $value != NONE;\nDEFINE FIELD OVERWRITE slug ON post TYPE option<string>;\nDEFINE FIELD OVERWRITE tags ON post TYPE array<string> ASSERT $value != NONE;\nDEFINE FIELD OVERWRITE author ON post TYPE record<author> ASSERT $value != NONE;\nDEFINE FIELD OVERWRITE read_time ON post TYPE option<int>;\nDEFINE FIELD OVERWRITE total_views ON post TYPE int DEFAULT 0;\nDEFINE FIELD OVERWRITE created_at ON post TYPE datetime DEFAULT time::now();\nDEFINE FIELD OVERWRITE updated_at ON post TYPE datetime VALUE time::now();\nDEFINE FIELD OVERWRITE is_published ON post TYPE bool DEFAULT false;\nDEFINE FIELD OVERWRITE header_image ON post TYPE option<string>;\nDEFINE FIELD OVERWRITE show_cta ON post TYPE bool DEFAULT false;\n\nDEFINE TABLE OVERWRITE reference SCHEMAFULL\n    PERMISSIONS\n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD OVERWRITE title ON reference TYPE string;\nDEFINE FIELD OVERWRITE description ON reference TYPE string;\nDEFINE FIELD OVERWRITE url ON reference TYPE string;\nDEFINE FIELD OVERWRITE tags ON reference TYPE array<string>;\nDEFINE FIELD OVERWRITE tech_stack ON reference TYPE array<string>;\nDEFINE FIELD OVERWRITE teck_stack_percentage ON reference TYPE array<int>;\nDEFINE FIELD OVERWRITE is_published ON reference TYPE bool DEFAULT false;\nDEFINE FIELD OVERWRITE created_at ON reference TYPE datetime DEFAULT time::now();\nDEFINE FIELD OVERWRITE updated_at ON reference TYPE datetime VALUE time::now();\n\nDEFINE TABLE OVERWRITE script_migration SCHEMAFULL\n    PERMISSIONS\n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD OVERWRITE script_name ON script_migration TYPE string;\nDEFINE FIELD OVERWRITE executed_at ON script_migration TYPE datetime VALUE time::now() READONLY;\n","events":"DEFINE EVENT OVERWRITE post_read_time ON TABLE post WHEN ($event = \"UPDATE\" || $event = \"CREATE\") && $before.body != $after.body THEN {\n    LET $read_time = array::len(string::words($after.body)) / 200;\n    UPDATE post SET read_time = math::max([1, $read_time]) WHERE id = $after.id;\n};\n\nDEFINE EVENT OVERWRITE post_slug ON TABLE post WHEN ($event = \"CREATE\" OR $event = \"UPDATE\") && $before.title != $after.title THEN (\n    UPDATE post SET slug = string::slug($after.title) WHERE id = $after.id\n);\n"}