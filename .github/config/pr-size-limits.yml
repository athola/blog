# Centralized PR size configuration
# Used by pr-size-check.yml, pr-size-metrics.yml, and visualization scripts

# PR size limits (lines changed = additions + deletions)
limits:
  max_pr_size: 2000      # Hard limit - PRs above this size are blocked
  ideal_pr_size: 500     # Target size for optimal reviews
  good_pr_size: 1500     # Acceptable size with minor warning

# Categories and their corresponding labels/emojis
categories:
  ideal:
    label: "âœ… Ideal"
    range: "0-500 lines"
    description: "Single feature, bug fix, or refactor"
    status: "success"
  good:
    label: "ðŸŸ¡ Good" 
    range: "501-1500 lines"
    description: "Medium feature or multiple related changes"
    status: "success"
  large:
    label: "âš ï¸ Large"
    range: "1501-2000 lines"
    description: "Complex feature requiring justification"
    status: "neutral"
  too_large:
    label: "âŒ Too Large"
    range: ">2000 lines"
    description: "Should be broken into multiple PRs"
    status: "failure"

# File patterns to exclude from size calculations
excluded_patterns:
  # Rust build artifacts
  - "target/*"
  
  # Lock files
  - "*.lock"
  - "Cargo.lock"
  - "package-lock.json"
  - "yarn.lock"
  - "pnpm-lock.yaml"
  
  # Generated frontend assets
  - "*/pkg/*"
  - "*/dist/*"
  - "*/build/*"
  - "*/out/*"
  
  # Minified assets
  - "*.min.js"
  - "*.min.css"
  - "*.min.html"
  
  # Generated code directories
  - "*/generated/*"
  - "*/gen/*"
  - "*/.generated/*"
  
  # Generated files (common patterns)
  - "*_generated.*"
  - "*.generated.*"
  - "*-generated.*"
  
  # Common build outputs
  - "*.wasm"
  - "*.so"
  - "*.dll"
  - "*.dylib"
  
  # Documentation builds
  - "*/docs/build/*"
  - "*/_site/*"
  
  # Test coverage reports
  - "*/coverage/*"
  - "*/htmlcov/*"
  - "*.coverage"

# Messages used in workflows
messages:
  breaking_change_notice: |
    ### ðŸš¨ Action Required
    
    This PR exceeds the maximum size limit. Please consider:
    
    1. **Break into smaller PRs** using [strategies from CLAUDE.md]({{ github.server_url }}/{{ github.repository }}/blob/master/CLAUDE.md#breaking-down-large-changes)
    2. **Add justification** in PR description if this change cannot be split
    3. **Request maintainer review** for size limit override
  
  size_suggestion: |
    ### ðŸ’¡ Suggestion
    
    Consider breaking this PR into smaller, more focused changes for easier review.
  
  size_benefits: |
    ### Why Size Matters
    - **Faster reviews**: Smaller PRs are reviewed more quickly and thoroughly
    - **Reduced bugs**: Easier to spot issues in focused changes
    - **Better discussion**: Reviewers can provide more meaningful feedback
    - **Easier rollbacks**: Smaller changes are simpler to revert if needed